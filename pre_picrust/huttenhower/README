Dependencies
============
To build and run PIECRUST, you'll need the following dependencies:
* Numpy, a package for scientific computing in Python
* ETE 2, a package for the manipulation, analysis, and visualization of phylogenetic trees
* SCons, a software construction tool similar to the Make utility

Additionally, I like to use:
* virtualenv, a tool to create isolated Python environments
* virtualenvwrapper, syntactic sugar for virualenv
* pip, a package manager for Python

Note: I'll denote the directory that you put piecrust in as $PIECRUST_HOME, and the directory
      that contains arepa as $AREPA_HOME.

Set up the environment
======================
1. First I setup a Python environment specifically to develop piecrust.

$ mkvirtualenv piecrust

2. Next I installed the dependencies. PIECRUST doesn't use the database and visualization
   ETE toolkits. Its setup script will warn you that you won't be able to use them unless
   you install more dependencies. That's okay, though.

(piecrust)$ pip install numpy
(piecrust)$ cd $PIECRUST_HOME/etc
(piecrust)$ tar xzvf scons-2.1.0.tar.gz
(piecrust)$ tar xzvf ete2-2.0rev111.tar.gz
(piecrust)$ cd scons-2.1.0
(piecrust)$ python setup.py install
(piecrust)$ cd ../ete2-2.0rev111
(piecrust)$ python setup.py install
>> Installing ETE (A python Environment for Tree Exploration).

Checking dependencies...
MySQLdb cannot be found in your python installation.
MySQLdb is required for the PhylomeDB access API.
PyQt4 cannot be found in your python installation.
PyQt4 is required for tree visualization and rendering.

However, you can still install ETE without such funtionalites.
Do you want to continue with the installation? [y,n]
>>
y

3. Make $PIECRUST_HOME/bin/ANFunc PATH accessible. This executable isn't actually part of PIECRUST; it's part of another project in the lab. It was written in C++ to multiply matrices fast. It can probably be replaced with something in SciPy later on.

(piecrust)$ export PATH=$PATH:$PIECRUST_HOME/bin/ANFunc


Run piecrust
==========
1. All you need to do is run scons from $PIECRUST_HOME. The SConstruct file will tell SCons
   what to do. 
(piecrust)$ scons

  The build takes a while, so I submitted it as a job to our local cluster rather than run
  it on my laptop.
(piecrust)$ bsub -o scons.out -e scons.err -q sysbio_1d /home/jar25/.environments/piecrust/bin/scons

2. The output files show up in $PIECRUST_HOME/output.
jar25@balcony:output$ ls -l
total 2748650
-rw-rw-r-- 1 jar25 jar25    3403110 2011-11-05 19:27 98indiv_SNP_fir.pcl
-rw-rw-r-- 1 jar25 jar25    4297513 2011-11-06 16:15 98indiv_SNP_kos.pcl
-rw-rw-r-- 1 jar25 jar25 1559516718 2011-11-06 03:50 genomes.pcl
-rw-rw-r-- 1 jar25 jar25   13649206 2011-11-06 01:53 genomes.tsv
-rw-rw-r-- 1 jar25 jar25  397777723 2011-11-06 16:26 hq.otu_04-nul-nul-mtd-trn-flt_fir.pcl
-rw-rw-r-- 1 jar25 jar25  207663173 2011-11-06 16:56 hq.otu_04-nul-nul-mtd-trn-flt_kos.pcl
-rw-rw-r-- 1 jar25 jar25   57180959 2011-11-05 17:16 map_phylo_names.txt
-rw-rw-r-- 1 jar25 jar25   32907297 2011-11-05 17:28 ncbi.fir
-rw-rw-r-- 1 jar25 jar25     195875 2011-11-06 16:56 osccar_prism_00_fir.pcl
-rw-rw-r-- 1 jar25 jar25   11388878 2011-11-06 16:58 osccar_prism_00_kos.pcl
-rw-rw-r-- 1 jar25 jar25   29748851 2011-11-05 17:27 phylo.fir
-rw-rw-r-- 1 jar25 jar25   29774440 2011-11-05 19:26 phylo_ncbi.fir
-rw-rw-r-- 1 jar25 jar25   12332719 2011-11-05 17:25 phylo_pre.fir

I included the log from my run of SCons in the Dropbox folder as out.log.
